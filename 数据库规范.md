# 数据库设计规范

针对目前常用的MySQL数据库，做出以下规范。

## 命名

|          | 规范                                                         | 示例                                                         | 描述                                          |
| -------- | ------------------------------------------------------------ | ------------------------------------------------------------ | --------------------------------------------- |
| 数据库名 | 项目命名；项目缩写+有意义的英文单词组成；多个单词以下划线分割；全部为小写字母组成 |                                                              |                                               |
| 表名     | 固定前缀 + 模块命名；有意义的英文单词组成；多个单词以下划线分割；全部为小写字母组成；复杂业务场景下可以按照业务前缀进行业务域区分 | <code>t_auth_account</code><br><code>t_auth_resource</code>  | 固定前缀：<code>t_</code>                     |
| 字段名   | 实体属性名；有意义的英文单词组成；多个单词以下划线分割；全部为小写字母组成 | <code>name</code> <code>age</code> <code>user_id</code>      | 存在关联关系的字段，如外键：<code>a_id</code> |
| 索引     | 固定前缀 + 表名 + 字段名；需注意索引名长度限制；唯一索引增加`unique`标识 | <code>idx_authority_account_age</code>                       | 固定前缀：<code>idx_</code>                   |

## 数据格式

常用的数据类型：bigint、tinyint、int、decimal、datetime、timestamp、varchar。

*小数类型建议使用 decimal，不建议使用 float、double。*

## 基础字段

| 字段名      | 描述     | 类型      | 默认值                                 | 是否必选 | 
| ----------- | -------- | --------- | ------------------------------------ | ------   |
| id          | 主键     | bigint    | 自增或雪花算法（序列化时转为String）    | 是       |
| create_time | 插入时间 | timestamp | CURRENT_TIMESTAMP                     | 是       |
| update_time | 更新时间 | timestamp | CURRENT_TIMESTAMP                     | 是       |
| is_delete   | 逻辑删除 | tinyint   | 0                                     | 否       |
| version     | 版本号   | bigint    | 0                                     | 否       |

**逻辑删除应用场景**

用于逻辑删除，适合基础资料，各种单据主表。配置表，明细表等不需要删除标志

**版本号应用场景**

用于乐观锁并发控制，适合基础资料，各种单据主表等。单据的明细表不需要版本号。

## 表字段基本约束

- 全部小写命名，禁止出现大写
- 字段必须填写描述信息
- 字段均使用下划线分隔
- 字段禁止使用无意义缩写，使用完整名称代替，不要怕长
- 在命名表的列时，不要重复表的名称。例如，在名employe的表中避免使用名为employee_lastname的字段

## 表之间引用字段

一个表A需要存储另一个表B的字段，那么在A表中，需要明确B的字段所属，即命名规则为：`B_XX`

在单据中，比如需要存订单的单号和id，即当前表的订单相关字段命名：`order_bill_id`, `order_bill_no`
